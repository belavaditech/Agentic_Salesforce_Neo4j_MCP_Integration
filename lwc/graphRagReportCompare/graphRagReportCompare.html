<template>
  <lightning-card title="GraphRAG Report compare (Vector vs Hybrid)" icon-name="standard:graph">
    <div class="slds-p-around_medium">
      <lightning-textarea
        label="Question"
        value={question}
        onchange={handleQuestionChange}
        placeholder="Enter your question"
        rows="4"
      ></lightning-textarea>

      <div class="slds-m-top_small slds-grid slds-grid_align-spread">
        <lightning-button label="Run Vector Query" variant="brand" onclick={runVector}></lightning-button>
        <lightning-button label="Run Hybrid Query" variant="neutral" onclick={runHybrid}></lightning-button>
      </div>

      <template if:true={loading}>
        <p class="slds-m-top_small">Running query...</p>
      </template>

      <template if:true={error}>
        <lightning-card title="Error" class="slds-m-top_medium">
          <pre class="error-text">{error}</pre>
        </lightning-card>
      </template>

      <template if:true={showResults}>
        <div class="slds-grid slds-wrap slds-m-top_medium">
          <div class="slds-col slds-size_1-of-2">
            <lightning-card title="Vector Response">
              <div class="scrollable-box">
                <pre class="preserve-format">{vectorDisplay}</pre>
              </div>
            </lightning-card>
          </div>

          <div class="slds-col slds-size_1-of-2">
            <lightning-card title="Hybrid Response (Vector + Cypher)">
              <div class="scrollable-box">
                <pre class="preserve-format">{hybridDisplay}</pre>
              </div>
            </lightning-card>
          </div>
        </div>
      </template>
    </div>
  </lightning-card>
</template>
